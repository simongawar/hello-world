<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ChatBot</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/dist/jquery.convform.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/demo.css">
<!--    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>-->
</head>
<body>
<header>

    <div class="logo">
        <img src="/images/ChatBotLogo2.jpg" alt="ChatBot logo">
        <h2 class="name">HELLO <span id="welcomename"></span></h2>
    </div>

    <nav class="navbar">
        <ul class="navlinks">

            <li><a class="logout" href="/" onclick="logout()"><button>Logout</button></a></li>
        </ul>
    </nav>



</header>
<section id="demo">
    <div class="vertical-align">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-sm-offset-3 col-xs-offset-0">
                    <div class="card no-border">
                        <div id="chat" class="conv-form-wrapper">
                            <form action="" method="GET" class="hidden">
                                <select data-conv-question="Hello! I'm a bot created for you. How can I help you? " name="first-question">
                                    <option value="yes">Yes</option>
                                    <option value="sure">Sure!</option>
                                </select>
                                <input type="text" name="name" data-conv-question="Alright! First, tell me your full name, please.|Okay! Please, tell me your name first.">
                                <input type="text" data-conv-question="Hello, {name}:0! It's a pleasure to meet you." data-no-answer="true">
                                <input type="text" data-conv-question="So let me help you for choosing cars." data-no-answer="true">
                                <select name="budget" data-callback="storeState" data-conv-question="Have you decided your budget?">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                                <div data-conv-fork="budget">
                                    <div data-conv-case="yes">
                                        <input type="text" data-conv-question="Thats nice.." data-no-answer="true">
                                        <select name="choose" data-conv-question="You can choose from below:">
                                            <option value="Less than 20 lakhs">Less than 20 lakhs</option>
                                            <option value="Above 20 lakhs">Above 20 lakhs</option>
                                        </select>
                                    </div>
                                    <div data-conv-case="no">
                                        <select name="help" data-conv-question="OK. Then let's help you more.">
                                            <option value="yes">Yes</option>
                                            <option value="no">No..</option>
                                        </select>
                                    </div>
                                </div>

                                <select name="multi[]" data-conv-question="What type of car you are looking for?" multiple>
                                    <option value="HatchBacks">HatchBacks</option>
                                    <option value="SUVs">SUVs</option>
                                    <option value="Sedan Class">Sedan Class</option>

                                </select>
                                <input type="text" data-conv-question="OK then.." data-no-answer="true">
                                <select name="multi[]" data-conv-question="What color of car do you prefer?" multiple>
                                    <option value="Black">Black</option>
                                    <option value="Silver">Silver</option>
                                    <option value="Red">Red</option>
                                    <option value="Grey">Grey</option>
                                    <option value="Brown">Brown</option>

                                </select>
                                <input type="text" data-conv-question="Nice choice." data-no-answer="true">
                                <select name="multi[]" data-conv-question="What engine do you prefer?" multiple>
                                    <option value="Petrol engine">Petrol Engine</option>
                                    <option value="Diesel engine">Diesel Engine</option>
                                </select>

                                <select data-conv-question="According to your preferences, here are the list of sedan classes you would love.. Go have a check to it..">

                                    <option value="HondaCity" data-callback="HondaCity">Honda City</option>
                                    <option value="HondaCivic" data-callback="HondaCivic">Honda Civic</option>
                                    <option value="HondaAmaze" data-callback="HondaAmaze">Honda Amaze</option>
                                </select>

                                <select data-conv-question="According to your preferences, here are the list of SUVs you would love.. Go have a check to it..">

                                    <option value="HondaCRV" data-callback="HondaCRV">Honda CR-V</option>
                                    <option value="HondaWRV" data-callback="HondaWRV">Honda WR-V</option>
                                </select>


                                <select name="callbackTest" data-conv-question="Did you like your car?">
                                    <option value="yes" data-callback="restore">Yes</option>
                                    <option value="no" data-callback="rollback">No</option>
                                </select>
                                <input type="text" data-conv-question="When do you want to get your delivery?" data-no-answer="true">
                                <select name="multi[]" data-conv-question="Choose a suitable date." multiple>
                                    <option value="Within a week">Within a week</option>
                                    <option value="After one week">After one week</option>
                                </select>
                                <input type="text" data-conv-question="Are you happy with our service?" data-no-answer="true">
                                <select name="multi[]" data-conv-question="Your opinion matters.." multiple>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                                <select data-conv-question="This is it! If you need support, contact me again" id="">
                                    <option value="">Awesome!</option>
                                </select>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script type="text/javascript" src="/jquery/jquery-1.12.3.min.js"></script>
<script type="text/javascript" src="/dist/autosize.min.js"></script>
<script type="text/javascript" src="/dist/jquery.convform.js"></script>

<script>
		function HondaCity(stateWrapper, ready) {
			window.open("https://www.hondacarindia.com/honda-city");
			ready();
		}
		function HondaCivic(stateWrapper, ready) {
			window.open("https://www.hondacarindia.com/honda-civic");
			ready();
		}
		function HondaAmaze(stateWrapper, ready) {
			window.open("https://www.hondacarindia.com/honda-amaze");
			ready();
		}
		function HondaCRV(stateWrapper, ready){
			window.open("https://www.hondacarindia.com/honda-crv");
			ready();
		}
		function HondaWRV(stateWrapper, ready) {
			window.open("https://www.hondacarindia.com/new-honda-wrv");
			ready();
		}
		var rollbackTo = false;
		var originalState = false;
		function storeState(stateWrapper, ready) {
			rollbackTo = stateWrapper.current;
			console.log("storeState called: ",rollbackTo);
			ready();
		}
		function rollback(stateWrapper, ready) {
			console.log("rollback called: ", rollbackTo, originalState);
			console.log("answers at the time of user input: ", stateWrapper.answers);
			if(rollbackTo!=false) {
				if(originalState==false) {
					originalState = stateWrapper.current.next;
						console.log('stored original state');
				}
				stateWrapper.current.next = rollbackTo;
				console.log('changed current.next to rollbackTo');
			}
			ready();
		}
		function restore(stateWrapper, ready) {
			if(originalState != false) {
				stateWrapper.current.next = originalState;
				console.log('changed current.next to originalState');
			}
			ready();
		}
<!--		var token = localStorage.getItem('token');-->
<!--        if(token === null){-->
<!--            console.log(token);-->
<!--            window.location.href="/";-->
<!--            alert('User Not Authenticated')-->
<!--        }-->
<!--        else{-->
<!--            document.getElementById('welcomename').innerHTML=localStorage.getItem('name') || null;-->
<!--        }-->
	</script>
<script>
		jQuery(function($){
			convForm = $('#chat').convform({selectInputStyle: 'disable'});
			console.log(convForm);
		});
	</script>
</body>
</html>